#!/bin/bash

this_dir=$(cd $(dirname $0);pwd)

. $this_dir/../conf/app.conf
. $this_dir/functions

#=====================================
# MAIN
#=====================================

while true
do
  #res=$($this_dir/getTemperature)

  TS=$(date "+%Y%m%d_%H%M%S %s")

  curTemperature=$(getTemperature)
  setTemperatureToFile $curTemperature

  curSetpoint=$(getSetpointFromFile)
  curPumpStatus=$(getPumpStatus)
  curHeaterStatus=$(getHeaterStatus)

  printf "${TS} setpoint: %-6.2f temperature: %-6.2f pump: %-5s heater: %-5s\n" $curSetpoint $curTemperature $curPumpStatus $curHeaterStatus
  sleep 0.1
done
